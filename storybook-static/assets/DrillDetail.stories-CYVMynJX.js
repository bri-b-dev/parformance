import{k as T,u as E,f as w,q as m,s as i,F as M,y as ne,p,A as B,x as v,r as I,G as ie,w as ae,v as S,H,I as O,J as le,E as N,l as re,K as V,L as G,M as ke,n as oe,B as F}from"./vue.esm-bundler-BAM-3gvP.js";import{d as A}from"./pinia-BiTO069Q.js";import{_ as we}from"./iframe-NAFmcwgx.js";import{_ as xe}from"./MetricValueInput-JW-RSDvs.js";import{_ as Se}from"./SparklineLast-Q1WtP4DV.js";import"./Sparkline-DUDhGfSA.js";const De=()=>{try{return typeof window<"u"&&!!window.localStorage}catch{return!1}};function Ie(){if(De())return window.localStorage;const e=new Map;return{getItem:s=>e.has(s)?e.get(s):null,setItem:(s,t)=>void e.set(s,t),removeItem:s=>void e.delete(s),clear:()=>void e.clear(),key:s=>Array.from(e.keys())[s]??null,get length(){return e.size}}}function q(e,s,t=250,a){const n=new Map,r=(u,c=s)=>`${e}.${u}.v${c}`,l=()=>Ie();function d(u){const c=l(),o=`${e}.${u}`;if(c.getItem(o)!=null)return{key:o,fromVersion:null};const f=`${e}.${u}.v`;for(let x=0;x<c.length;x++){const D=c.key(x);if(D&&D.startsWith(f)){const k=D.slice(f.length),$=Number.isFinite(Number(k))?Number(k):null;if($!==s)return{key:D,fromVersion:$}}}return null}function h(u){const c=l(),o=d(u);if(!o)return null;const f=c.getItem(o.key);if(!f)return null;let x;try{x=JSON.parse(f)}catch{return c.removeItem(o.key),null}const k=($=>$)(x,o.fromVersion,s);try{c.setItem(r(u),JSON.stringify(k)),c.removeItem(o.key)}catch{}return k}function y(u){const c=r(u);let f=l().getItem(c);if(!f){const x=h(u);return x??null}try{return JSON.parse(f)}catch{return null}}function _(u,c){const o=r(u);try{l().setItem(o,JSON.stringify(c))}catch{}}function b(u,c){const o=r(u);n.has(o)&&clearTimeout(n.get(o));const f=setTimeout(()=>{n.delete(o),_(u,c)},t);n.set(o,f)}function g(){for(const u of n.values())clearTimeout(u);n.clear()}return{get:y,set:_,setDebounced:b,flush:g}}const j=q("parformance",1),Ce=A("favorites",{state:()=>({favorites:[],loaded:!1}),getters:{isFavorite:e=>s=>e.favorites.includes(s),list:e=>e.favorites},actions:{async load(){const e=j.get("favorites");this.favorites=Array.isArray(e)?e:[],this.loaded=!0},async persist(){j.setDebounced("favorites",this.favorites)},async add(e){this.favorites.includes(e)||(this.favorites.push(e),await this.persist())},async remove(e){const s=this.favorites.filter(t=>t!==e);s.length!==this.favorites.length&&(this.favorites=s,await this.persist())},async toggle(e){this.favorites.includes(e)?await this.remove(e):await this.add(e)},async clearAll(){this.favorites=[],await this.persist()}}});function Ne(e,s,t,a){const n=e.metrics[t];if(n==null)return!1;const r=s.filter(h=>h.drillId===e.drillId).map(h=>h.metrics[t]).filter(h=>h!=null);if(r.length===0)return!1;if(a!=null&&a.comparator){const h=r.reduce((y,_)=>a.comparator(_,y)>0?_:y,r[0]);return a.comparator(n,h)>0}const l=(a==null?void 0:a.greaterIsBetter)??!0,d=r.reduce((h,y)=>l?Math.max(h,y):Math.min(h,y),r[0]);return l?n>d:n<d}var Te={};const Fe=A("drillCatalog",{state:()=>({drills:[],loaded:!1,error:null}),actions:{async load(){if(!(this.loaded&&this.drills.length>0))try{let e;typeof process<"u"&&Te.VITEST?e=require("../data/drills.json"):e=await we(()=>import("./drills-DhFXNBJ1.js"),[],import.meta.url);const s=(e==null?void 0:e.default)??e;if(!Array.isArray(s)||s.length===0)throw new Error("No drills found in drills.json");this.drills=s,this.error=null}catch(e){const s="Konnte Drills nicht laden. Bitte sp√§ter erneut versuchen.";if(this.error=(e==null?void 0:e.message)||s,typeof globalThis<"u"&&typeof globalThis.dispatchEvent=="function"){let t;try{t=new CustomEvent("toast",{detail:{type:"error",message:s}})}catch{t={type:"toast",detail:{type:"error",message:s}}}globalThis.dispatchEvent(t)}}finally{this.loaded=!0}}}}),K=q("parformance",1),U=A("sessions",{state:()=>({sessions:[],loaded:!1}),getters:{listByDrill:e=>s=>e.sessions.filter(t=>t.drillId===s).sort((t,a)=>a.date.localeCompare(t.date)),latestByDrill(){return e=>this.listByDrill(e)[0]}},actions:{async load(){const e=K.get("sessions");this.sessions=Array.isArray(e)?e:[],this.loaded=!0},async persist(){K.setDebounced("sessions",this.sessions)},async addSession(e){var a,n;const s=e.id??crypto.randomUUID(),t={...e,id:s};try{const l=Fe().drills.find(b=>b.id===e.drillId),d="value",h={drillId:e.drillId,metrics:{[d]:(a=e.result)==null?void 0:a.value}},y=this.sessions.filter(b=>b.drillId===e.drillId).map(b=>{var g;return{drillId:b.drillId,metrics:{[d]:(g=b.result)==null?void 0:g.value}}}),_=((n=l==null?void 0:l.metric)==null?void 0:n.type)!=="score_vs_par";if(Ne(h,y,d,{greaterIsBetter:_})&&typeof globalThis<"u"&&typeof globalThis.dispatchEvent=="function"){let b;try{b=new CustomEvent("toast",{detail:{type:"success",message:"PB!"}})}catch{b={type:"toast",detail:{type:"success",message:"PB!"}}}globalThis.dispatchEvent(b)}}catch{}return this.sessions.push(t),this.sessions.sort((r,l)=>l.date.localeCompare(r.date)),await this.persist(),t},async remove(e){this.sessions=this.sessions.filter(s=>s.id!==e),await this.persist()},async clearAll(){this.sessions=[],await this.persist()},async updateNotes(e,s){const t=this.sessions.findIndex(a=>a.id===e);if(t!==-1){const a={...this.sessions[t],notes:s??void 0};this.sessions[t]=a,await this.persist()}}}}),Z=q("parformance",1),de=A("settings",{state:()=>({hcp:null,handedness:"right",loaded:!1}),getters:{getHcp:e=>e.hcp,getHandedness:e=>e.handedness},actions:{async load(){const e=Z.get("settings");e&&((typeof e.hcp=="number"||e.hcp===null)&&(this.hcp=e.hcp??null),(e.handedness==="right"||e.handedness==="left")&&(this.handedness=e.handedness)),this.loaded=!0},async persist(){Z.setDebounced("settings",{hcp:this.hcp,handedness:this.handedness})},async setHcp(e){if(this.hcp=e,typeof globalThis<"u"&&typeof globalThis.dispatchEvent=="function"){let s;try{s=new CustomEvent("hcp-changed",{detail:e})}catch{s={type:"hcp-changed",detail:e}}globalThis.dispatchEvent(s)}await this.persist()},async setHandedness(e){this.handedness=e,await this.persist()},async clearAll(){this.hcp=null,this.handedness="right",await this.persist()}}});function ce(e){if(!e)return null;const t=String(e).trim().replace("‚Äì","-").match(/^\s*(\d{1,2})\s*-\s*(\d{1,2})\s*$/);if(!t)return null;const a=Number(t[1]),n=Number(t[2]),r=Math.max(a,n),l=Math.min(a,n);return{hi:r,lo:l}}function ue(e,s){if(typeof e!="number"||!isFinite(e))return null;let t=null;for(const a of Object.keys(s||{})){const n=ce(a);if(n&&e>=n.lo&&e<=n.hi)if(!t)t={key:a,...n};else{const r=t.hi-t.lo;n.hi-n.lo<r&&(t={key:a,...n})}}return(t==null?void 0:t.key)??null}function Ee(e){return String(e).trim().replace("-","‚Äì")}function Ae(e,s){const t=[],a=typeof s=="number"?ue(s,e):null;for(const n of Object.keys(e||{})){const r=ce(n);if(!r)continue;const l=Array.isArray(e[n])?e[n]:[];t.push({key:n,label:Ee(n),values:l,highlighted:n===a,hi:r.hi,lo:r.lo})}return t.sort((n,r)=>r.hi-n.hi||r.lo-n.lo),t}function Me(e,s){return Ae(e.metric.hcpTargets||{},s)}const Le={class:"card",style:{"margin-top":"10px"}},Be={class:"hcp-table","aria-label":"HCP Zielwerte"},Pe={scope:"row",class:"text-left p-2"},ze={class:"text-right p-2"},Ve={class:"text-right p-2"},Ge={class:"text-right p-2"},pe=T({__name:"HcpTargetsTable",props:{drill:{}},setup(e){const s=e,t=de();E(async()=>{t.loaded||await t.load()});const a=w(()=>Me(s.drill,t.hcp));function n(r,l){return r.highlighted?"inline-block px-2 py-1 rounded-md font-semibold text-emerald-900 bg-emerald-100":"inline-block px-2 py-1 rounded-md text-gray-700"}return(r,l)=>(p(),m("div",Le,[i("table",Be,[l[0]||(l[0]=i("caption",{class:"sr-only"},"Zielwerte nach Handicap-Bereich (L1‚ÄìL3)",-1)),l[1]||(l[1]=i("thead",null,[i("tr",null,[i("th",{scope:"col",class:"text-left p-2"},"HCP"),i("th",{scope:"col",class:"text-right p-2"},"L1"),i("th",{scope:"col",class:"text-right p-2"},"L2"),i("th",{scope:"col",class:"text-right p-2"},"L3")])],-1)),i("tbody",null,[(p(!0),m(M,null,ne(a.value,d=>(p(),m("tr",{key:d.key,class:B(d.highlighted?"bg-emerald-50":"")},[i("th",Pe,v(d.label),1),i("td",ze,[i("span",{class:B(n(d))},v(d.values[0]??"‚Äì"),3)]),i("td",Ve,[i("span",{class:B(n(d))},v(d.values[1]??"‚Äì"),3)]),i("td",Ge,[i("span",{class:B(n(d))},v(d.values[2]??"‚Äì"),3)])],2))),128))])])]))}});pe.__docgenInfo={exportName:"default",displayName:"HcpTargetsTable",description:"",tags:{},props:[{name:"drill",required:!0,type:{name:"Drill"}}],sourceFiles:["/Users/brigittebohm/Workspace/golf/parformance/src/components/HcpTargetsTable.vue"]};function qe(e={}){const s=I(0),t=I(!1);let a=null;function n(){a&&(clearInterval(a),a=null)}function r(){t.value||(t.value=!0,a=setInterval(()=>{s.value+=1},1e3))}function l(){t.value=!1,n()}function d(){l(),s.value=0}return ie(()=>n()),e==null||e.presetSeconds,{elapsed:s,running:t,start:r,pause:l,reset:d}}const Oe={class:"card",style:{"max-width":"360px"}},Ue={class:"row",style:{"align-items":"center","justify-content":"space-between"}},He=["aria-label"],je=["aria-label"],Ke={class:"row",style:{"margin-top":"8px"}},Ze=["aria-pressed"],me=T({__name:"SimpleTimer",props:{presetSeconds:{},autoStart:{type:Boolean}},emits:["elapsed"],setup(e,{expose:s,emit:t}){const a=e,n=t,{elapsed:r,running:l,start:d,pause:h,reset:y}=qe({presetSeconds:a.presetSeconds});s({start:d,pause:h,reset:y});function _(){l.value?h():d()}function b(){y(),n("elapsed",0)}ae(r,f=>n("elapsed",f)),E(()=>{a.autoStart&&d()});function g(f){return f.toString().padStart(2,"0")}const u=w(()=>{const f=Math.max(0,Math.floor(r.value)),x=Math.floor(f/60),D=f%60;return`${g(x)}:${g(D)}`}),c=w(()=>{const f=Math.floor(a.presetSeconds??0);if(!f)return"0:00";const x=Math.floor(f/60),D=f%60;return`${g(x)}:${g(D)}`}),o=w(()=>`Verstrichene Zeit ${u.value}`);return(f,x)=>(p(),m("div",Oe,[i("div",Ue,[e.presetSeconds&&e.presetSeconds>0?(p(),m("div",{key:0,class:"chip","aria-label":`Voreinstellung ${c.value}`}," üéØ "+v(c.value),9,He)):S("",!0),i("output",{class:"chip","aria-label":o.value,"aria-live":"polite"}," ‚è±Ô∏è "+v(u.value),9,je)]),i("div",Ke,[i("button",{class:"btn btn-primary",type:"button",onClick:_,"aria-pressed":H(l)},v(H(l)?"Pause":"Start"),9,Ze),i("button",{class:"btn",type:"button",onClick:b,"aria-label":"Zur√ºcksetzen"},"Reset")])]))}});me.__docgenInfo={exportName:"default",displayName:"SimpleTimer",description:"",tags:{},expose:[{name:"start"},{name:"pause"},{name:"reset"}],props:[{name:"presetSeconds",required:!1,type:{name:"number"}},{name:"autoStart",required:!1,type:{name:"boolean"}}],sourceFiles:["/Users/brigittebohm/Workspace/golf/parformance/src/components/SimpleTimer.vue"]};const We={class:"card",style:{"margin-top":"10px"}},Je={style:{display:"flex","align-items":"center","justify-content":"space-between",gap:"8px","margin-bottom":"6px"}},Re={key:0,class:"chip","aria-label":"Anzahl Sessions"},Ye={key:0,class:"p-4 text-sm text-gray-600","aria-live":"polite"},Qe={key:1,class:"list-none",style:{padding:"0",margin:"0"}},Xe={class:"row",style:{"align-items":"center","justify-content":"space-between"}},et={style:{display:"flex","flex-direction":"column",gap:"2px"}},tt={style:{"line-height":"1"}},st={style:{color:"var(--muted)"}},nt={class:"chips",style:{"justify-content":"flex-end"}},it={key:0,class:"chip",title:"Versuche"},at={key:1,class:"chip",title:"Zeit"},lt={style:{"margin-top":"6px"}},rt=["for"],ot=["id"],dt={class:"row",style:{"justify-content":"flex-end","margin-top":"6px"}},ct=["onClick"],ut={key:0,style:{margin:"0","white-space":"pre-wrap"}},pt={key:1,style:{margin:"0",color:"var(--muted)"}},mt={class:"row",style:{"justify-content":"flex-end","margin-top":"6px"}},ft=["onClick","aria-label"],fe=T({__name:"SessionHistory",props:{drillId:{}},setup(e){const s=e,t=U();E(async()=>{t.loaded||await t.load()});const a=w(()=>t.loaded),n=w(()=>t.listByDrill(s.drillId)),r=I(null),l=I("");function d(u){r.value=u.id,l.value=u.notes??""}function h(){r.value=null,l.value=""}async function y(u){await t.updateNotes(u,l.value||void 0),r.value=null,l.value=""}function _(u){return u.toString().padStart(2,"0")}function b(u){const c=Math.max(0,Math.floor(u||0)),o=Math.floor(c/60),f=c%60;return`${_(o)}:${_(f)}`}function g(u){try{const c=new Date(u),o=c.getFullYear(),f=_(c.getMonth()+1),x=_(c.getDate()),D=_(c.getHours()),k=_(c.getMinutes());return`${o}-${f}-${x} ${D}:${k}`}catch{return u}}return(u,c)=>(p(),m("section",We,[i("header",Je,[c[1]||(c[1]=i("h3",{style:{margin:"0","font-weight":"700"}},"Verlauf",-1)),n.value.length?(p(),m("small",Re,v(n.value.length)+" Eintr√§ge",1)):S("",!0)]),a.value&&n.value.length===0?(p(),m("output",Ye," Noch keine Eintr√§ge. Starte eine Session und speichere dein Ergebnis. ")):(p(),m("ul",Qe,[(p(!0),m(M,null,ne(n.value,o=>(p(),m("li",{key:o.id,class:"card",style:{margin:"6px 0"}},[i("div",Xe,[i("div",et,[i("strong",tt,v(o.result.value)+" "+v(o.result.unit),1),i("small",st,v(g(o.date)),1)]),i("div",nt,[o.attempts!=null?(p(),m("span",it,"‚Üª "+v(o.attempts),1)):S("",!0),o.timerUsed!=null?(p(),m("span",at,"‚è±Ô∏è "+v(b(o.timerUsed)),1)):S("",!0)])]),i("div",lt,[r.value===o.id?(p(),m(M,{key:0},[i("label",{class:"label",for:`notes-${o.id}`},"Notizen bearbeiten",8,rt),O(i("textarea",{id:`notes-${o.id}`,class:"input",rows:"2","onUpdate:modelValue":c[0]||(c[0]=f=>l.value=f),"data-testid":"notes-textarea","aria-live":"polite"},null,8,ot),[[le,l.value,void 0,{trim:!0}]]),i("div",dt,[i("button",{type:"button",class:"btn",onClick:h,"data-testid":"notes-cancel"},"Abbrechen"),i("button",{type:"button",class:"btn btn-primary",onClick:f=>y(o.id),"data-testid":"notes-save"},"Speichern",8,ct)])],64)):(p(),m(M,{key:1},[o.notes?(p(),m("p",ut,v(o.notes),1)):(p(),m("p",pt,"Keine Notizen")),i("div",mt,[i("button",{type:"button",class:"btn",onClick:f=>d(o),"aria-label":`Notizen bearbeiten f√ºr ${g(o.date)}`,"data-testid":"notes-edit"},"Notizen",8,ft)])],64))])]))),128))]))]))}});fe.__docgenInfo={exportName:"default",displayName:"SessionHistory",description:"",tags:{},props:[{name:"drillId",required:!0,type:{name:"string"}}],sourceFiles:["/Users/brigittebohm/Workspace/golf/parformance/src/components/SessionHistory.vue"]};const W=1e-6;function J(e){const s=(e||[]).filter(a=>typeof a=="number"&&isFinite(a));return s.length===0?null:s.reduce((a,n)=>a+n,0)/s.length}function ht(e){const s=(e||[]).filter(l=>typeof l=="number"&&isFinite(l)),t=s.length;let a=null,n=null;t>=5&&(a=J(s.slice(t-5))),t>=10&&(n=J(s.slice(t-10,t-5)));let r="na";if(a!=null&&n!=null){const l=a-n;l>W?r="up":l<-W?r="down":r="flat"}return{maLast5:a,maPrev5:n,trend:r}}const gt={class:"card",style:{"margin-top":"10px"}},yt={style:{display:"flex","align-items":"center","justify-content":"space-between",gap:"8px","margin-bottom":"6px"}},vt={key:0,class:"chip","aria-label":"Anzahl Sessions"},bt={key:0,class:"p-2 flex items-center text-sm text-gray-600","aria-live":"polite"},_t={key:1,class:"text-sm text-gray-600","aria-live":"polite"},$t={key:2,class:"row",style:{"align-items":"center"}},kt=["aria-label"],wt={style:{"margin-left":"4px",color:"inherit"}},xt=["aria-label"],St={style:{"margin-left":"4px",color:"inherit"}},Dt=["aria-label"],It={"aria-hidden":"true"},Ct={style:{"margin-left":"8px"}},he=T({__name:"DrillStatsSummary",props:{drillId:{},unit:{}},setup(e){const s=e,t=U();E(async()=>{t.loaded||await t.load()});const a=w(()=>t.loaded),n=w(()=>t.listByDrill(s.drillId)),r=w(()=>n.value.length),l=w(()=>n.value.map(c=>{var o;return Number((o=c.result)==null?void 0:o.value)}).filter(c=>Number.isFinite(c))),d=w(()=>{const c=(l.value||[]).slice();return c.length?(c.reverse(),c.slice(-10)):[]}),h=w(()=>l.value.length?Math.max(...l.value):0),y=w(()=>ht(l.value)),_=w(()=>y.value.maLast5!==void 0&&y.value.maLast5!==null?y.value.maLast5.toFixed(1):"‚Äì"),b=w(()=>{switch(y.value.trend){case"up":return"‚Üë";case"down":return"‚Üì";case"flat":case"na":default:return"‚Üí"}}),g=w(()=>{switch(y.value.trend){case"up":return"Trend: steigend (letzte 5 vs. vorherige 5)";case"down":return"Trend: fallend (letzte 5 vs. vorherige 5)";case"flat":return"Trend: neutral (gleich)";case"na":default:return"Trend: neutral (zu wenige Daten)"}}),u=w(()=>s.unit);return(c,o)=>(p(),m("section",gt,[i("header",yt,[o[0]||(o[0]=i("h3",{style:{margin:"0","font-weight":"700"}},"Kurzstatistik",-1)),r.value>0?(p(),m("small",vt,v(r.value)+" Eintr√§ge",1)):S("",!0)]),a.value?r.value===0?(p(),m("output",_t," Noch keine Daten. ")):(p(),m("div",$t,[i("div",{class:"chip","aria-label":`Bester Wert: ${h.value} ${u.value}`},[o[2]||(o[2]=N("üèÖ Best: ",-1)),i("strong",wt,v(h.value),1),N(" "+v(u.value),1)],8,kt),i("div",{class:"chip","aria-label":`Gleitender Schnitt (5): ${_.value}`},[o[3]||(o[3]=N(" üìà MA(5): ",-1)),i("strong",St,v(_.value),1)],8,xt),i("div",{class:"chip","aria-label":g.value,title:"Trend"},[i("span",It,v(b.value),1)],8,Dt),i("div",Ct,[d.value.length>0?(p(),re(Se,{key:0,values:d.value,width:140,height:28,color:"#2F7A52"},null,8,["values"])):S("",!0)])])):(p(),m("output",bt,[...o[1]||(o[1]=[i("span",{class:"inline-block h-4 w-4 mr-2 rounded-full border-2 border-gray-300 border-t-blue-500 animate-spin","aria-hidden":"true"},null,-1),N(" L√§dt‚Ä¶ ",-1)])]))]))}});he.__docgenInfo={exportName:"default",displayName:"DrillStatsSummary",description:"",tags:{},props:[{name:"drillId",required:!0,type:{name:"string"}},{name:"unit",required:!0,type:{name:"string"}}],sourceFiles:["/Users/brigittebohm/Workspace/golf/parformance/src/components/DrillStatsSummary.vue"]};const Nt=A("ui",{state:()=>({gamblerCollapsed:{},shuffleOpen:!1}),getters:{isGamblerCollapsed:e=>s=>s?e.gamblerCollapsed[s]??!0:!0},actions:{setGamblerCollapsed(e,s){this.gamblerCollapsed={...this.gamblerCollapsed||{},[e]:s}},setShuffle(e){this.shuffleOpen=!!e}}}),Tt={class:"gambler-panel card","aria-labelledby":"gambler-title"},Ft={style:{display:"flex","align-items":"center","justify-content":"space-between",gap:"8px"}},Et=["aria-expanded","onKeydown"],At={key:0},Mt={key:1},Lt={key:0,class:"p-2 text-sm text-gray-800"},Bt={key:0},Pt={key:1,class:"text-gray-600"},ge=T({__name:"GamblerTipPanel",props:{drillId:{},tip:{}},setup(e){const s=e,t=Nt(),a=w(()=>t.isGamblerCollapsed(s.drillId));function n(){t.setGamblerCollapsed(s.drillId,!a.value)}return(r,l)=>(p(),m("section",Tt,[i("header",Ft,[l[0]||(l[0]=i("h3",{id:"gambler-title",style:{margin:"0","font-weight":"700"}},"Zocker-Tipp",-1)),i("button",{class:"btn","aria-expanded":!a.value,onClick:n,onKeydown:[V(G(n,["prevent"]),["enter"]),V(G(n,["prevent"]),["space"])]},[a.value?(p(),m("span",At,"Anzeigen")):(p(),m("span",Mt,"Verbergen"))],40,Et)]),a.value?S("",!0):(p(),m("div",Lt,[e.tip&&e.tip.length?(p(),m("div",Bt,v(e.tip),1)):(p(),m("div",Pt,"Kein Zocker-Tipp verf√ºgbar."))]))]))}}),ye=(e,s)=>{const t=e.__vccOpts||e;for(const[a,n]of s)t[a]=n;return t},zt=ye(ge,[["__scopeId","data-v-96f139fe"]]);ge.__docgenInfo={exportName:"default",displayName:"GamblerTipPanel",description:"",tags:{},props:[{name:"drillId",required:!0,type:{name:"string"}},{name:"tip",required:!1,type:{name:"string"}}],sourceFiles:["/Users/brigittebohm/Workspace/golf/parformance/src/components/GamblerTipPanel.vue"]};function Vt(e,s,t){if(typeof t!="number"||!isFinite(t))return 0;const a=typeof e=="number"?ue(e,s||{}):null,n=a?(s==null?void 0:s[a])??[]:[],r=typeof n[0]=="number"&&isFinite(n[0])?n[0]:1/0,l=typeof n[1]=="number"&&isFinite(n[1])?n[1]:1/0,d=typeof n[2]=="number"&&isFinite(n[2])?n[2]:1/0;return t>=d?3:t>=l?2:t>=r?1:0}function Gt(e,s,t){var a;return Vt(s,((a=e.metric)==null?void 0:a.hcpTargets)||{},t)}const qt={class:"detail-grid","aria-label":"Drill Details"},Ot={class:"section"},Ut={class:"row",style:{"margin-top":"8px"}},Ht={key:0,class:"chip",title:"B√§lle"},jt={key:1,class:"chip",title:"Schl√§ger"},Kt={key:2,class:"chip",title:"Sonstiges"},Zt={class:"muted"},Wt={class:"muted"},Jt={style:{"margin-top":"10px"}},Rt={key:0,style:{margin:".25rem 0 0",color:"var(--muted)"}},Yt={key:1,style:{margin:".25rem 0 0",color:"var(--muted)"}},ve=T({__name:"DrillDetailGrid",props:{drill:{}},setup(e){return(s,t)=>{var a,n,r,l,d,h,y;return p(),m("fieldset",qt,[i("div",Ot,[t[2]||(t[2]=i("h3",null,"Was du brauchst",-1)),i("div",Ut,[((a=e.drill.equipment)==null?void 0:a.balls)!=null?(p(),m("div",Ht," üü¢ √ó "+v(e.drill.equipment.balls),1)):S("",!0),(((r=(n=e.drill.equipment)==null?void 0:n.clubs)==null?void 0:r.length)??0)>0?(p(),m("div",jt," ‚õ≥Ô∏è "+v((l=e.drill.equipment.clubs)==null?void 0:l.join(", ")),1)):S("",!0),(((h=(d=e.drill.equipment)==null?void 0:d.other)==null?void 0:h.length)??0)>0?(p(),m("div",Kt," üß∞ "+v((y=e.drill.equipment.other)==null?void 0:y.join(", ")),1)):S("",!0)]),t[3]||(t[3]=i("div",{class:"hr",style:{margin:"10px 0"}},null,-1)),t[4]||(t[4]=i("strong",{style:{margin:".25rem 0 0",color:"var(--muted)"}},"Ort",-1)),i("p",Zt,v(e.drill.setup.location),1),t[5]||(t[5]=i("strong",{style:{margin:".25rem 0 0",color:"var(--muted)"}},"Aufbau",-1)),i("p",Wt,v(e.drill.setup.schema),1),t[6]||(t[6]=i("strong",{style:{margin:".25rem 0 0",color:"var(--muted)"}},"Schematische Darstellung",-1)),t[7]||(t[7]=i("div",{class:"schema"},[i("canvas",{width:"20%",height:"200","aria-label":"Schematische Darstellung des Drills"})],-1)),t[8]||(t[8]=i("div",{class:"hr",style:{margin:"10px 0"}},null,-1)),i("div",Jt,[e.drill.instructions.test?(p(),m("p",Rt,[t[0]||(t[0]=i("strong",null,"Ablauf",-1)),N(" "+v(e.drill.instructions.test),1)])):S("",!0),e.drill.instructions.tooEasy?(p(),m("p",Yt,[t[1]||(t[1]=i("strong",null,"Zu leicht?",-1)),N(" "+v(e.drill.instructions.tooEasy),1)])):S("",!0)])])])}}});ve.__docgenInfo={exportName:"default",displayName:"DrillDetailGrid",description:"",tags:{},props:[{name:"drill",required:!0,type:{name:"Drill"}}],sourceFiles:["/Users/brigittebohm/Workspace/golf/parformance/src/components/DrillDetailGrid.vue"]};const R=q("parformance",1),Qt=A("gamerSettings",{state:()=>({map:{},loaded:!1}),getters:{forDrill:e=>s=>e.map[s]??{collapsed:!0,mode:void 0,handicapOffset:0}},actions:{async load(){const e=R.get("gamerSettings");this.map=e&&typeof e=="object"?e:{},this.loaded=!0},async persist(){R.setDebounced("gamerSettings",this.map)},async setFor(e,s){this.map={...this.map,[e]:{...this.map[e]??{},...s}},await this.persist()},async setCollapsed(e,s){await this.setFor(e,{collapsed:s})},async setMode(e,s){await this.setFor(e,{mode:s})},async setHandicapOffset(e,s){await this.setFor(e,{handicapOffset:s})}}}),Xt=["aria-hidden"],es={class:"panel-header"},ts=["aria-expanded","onKeydown"],ss={key:0,class:"panel-body",role:"dialog","aria-modal":"true"},be=T({__name:"GamerPanel",props:{drillId:{}},setup(e){const s=e,t=Qt(),a=I(!0),n=I({mode:void 0,handicapOffset:0});function r(){const b=t.forDrill(s.drillId);a.value=b.collapsed??!0,n.value={mode:b.mode,handicapOffset:b.handicapOffset??0}}E(async()=>{t.loaded||await t.load(),r()}),ae(()=>s.drillId,()=>r());async function l(){a.value=!a.value,await t.setCollapsed(s.drillId,a.value),a.value||oe(()=>_())}function d(){a.value=!0,t.setCollapsed(s.drillId,!0)}function h(){t.setMode(s.drillId,n.value.mode),t.setHandicapOffset(s.drillId,n.value.handicapOffset)}let y=null;function _(){const b=document.querySelector(".gamer-panel")||null;if(!b)return;const g=Array.from(b.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])')).filter(f=>!f.hasAttribute("disabled"));if(!g.length)return;const u=g[0],c=g[g.length-1];u.focus();function o(f){f.key==="Tab"?f.shiftKey&&document.activeElement===u?(f.preventDefault(),c.focus()):!f.shiftKey&&document.activeElement===c&&(f.preventDefault(),u.focus()):f.key==="Escape"&&d()}y=()=>{document.removeEventListener("keydown",o)},document.addEventListener("keydown",o)}return ie(()=>{y&&y()}),(b,g)=>(p(),m("section",{class:"gamer-panel","aria-hidden":a.value,ref:"container"},[i("header",es,[i("button",{class:"panel-toggle","aria-expanded":!a.value,onClick:l,onKeydown:[V(G(l,["prevent"]),["space"]),V(G(l,["prevent"]),["enter"])],ref:"toggleBtn"},v(a.value?"Gamer ‚ñº":"Gamer ‚ñ≤"),41,ts)]),a.value?S("",!0):(p(),m("div",ss,[i("label",null,[g[3]||(g[3]=N(" Mode ",-1)),O(i("select",{"onUpdate:modelValue":g[0]||(g[0]=u=>n.value.mode=u),"data-testid":"gamer-mode"},[...g[2]||(g[2]=[i("option",{value:""},"(none)",-1),i("option",{value:"practice"},"Practice",-1),i("option",{value:"competition"},"Competition",-1),i("option",{value:"game"},"Game",-1)])],512),[[ke,n.value.mode]])]),i("label",null,[g[4]||(g[4]=N(" Handicap offset ",-1)),O(i("input",{"data-testid":"gamer-offset",type:"number","onUpdate:modelValue":g[1]||(g[1]=u=>n.value.handicapOffset=u)},null,512),[[le,n.value.handicapOffset,void 0,{number:!0}]])]),i("div",{class:"panel-actions"},[i("button",{class:"btn",onClick:h,"data-testid":"gamer-save"},"Save"),i("button",{class:"btn",onClick:d,"data-testid":"gamer-close"},"Close")])]))],8,Xt))}}),ns=ye(be,[["__scopeId","data-v-d17e8785"]]);be.__docgenInfo={exportName:"default",displayName:"GamerPanel",description:"",tags:{},props:[{name:"drillId",required:!0,type:{name:"string"}}],sourceFiles:["/Users/brigittebohm/Workspace/golf/parformance/src/components/GamerPanel.vue"]};const is={class:"card",style:{"max-width":"720px"}},as={style:{display:"flex","align-items":"center","justify-content":"space-between",gap:"8px"}},ls={style:{margin:"0","font-size":"1.25rem","font-weight":"700"}},rs={style:{color:"var(--muted)",margin:".25rem 0 0"}},os=["aria-pressed","aria-label"],ds={"aria-hidden":"true"},cs={style:{}},us={class:"card",style:{"margin-top":"10px"}},ps={class:"row",style:{"align-items":"center","justify-content":"space-between"}},ms={key:0,class:"chip","aria-live":"polite"},fs={key:0,class:"row",style:{"align-items":"center"}},hs=["aria-label"],gs={class:"chip","aria-live":"polite","data-testid":"attempts-chip"},ys={class:"row"},vs=["disabled"],bs={key:1,style:{"margin-top":"8px"}},_e=T({__name:"DrillDetail",props:{drill:{}},setup(e){const s=e,t=Ce(),a=U(),n=de();E(async()=>{t.loaded||t.load(),a.loaded||await a.load(),n.loaded||await n.load()});const r=w(()=>t.isFavorite(s.drill.id));async function l(){await t.toggle(s.drill.id)}const d=I(!1),h=I(null),y=I(null),_=I(0),b=I(0),g=w(()=>d.value&&h.value!=null&&Number.isFinite(h.value)),u=w(()=>s.drill.gamerTip??s.drill.zockerTip);async function c(){var k,$;d.value=!0,await oe(),($=(k=y.value)==null?void 0:k.start)==null||$.call(k)}function o(){var k,$,C,L;d.value=!1,h.value=null,_.value=0,b.value=0,($=(k=y.value)==null?void 0:k.reset)==null||$.call(k),(L=(C=y.value)==null?void 0:C.pause)==null||L.call(C)}function f(){d.value&&(b.value+=1)}async function x(){var C;if(!g.value)return;const k=Gt(s.drill,n.hcp,h.value),$={drillId:s.drill.id,date:new Date().toISOString(),hcp:typeof n.hcp=="number"?n.hcp:0,result:{value:h.value,unit:s.drill.metric.unit},levelReached:k,favorited:!1};(C=s.drill.duration)!=null&&C.timerPreset&&($.timerUsed=_.value),s.drill.metric.type==="count_in_time"&&($.attempts=b.value),await a.addSession($),o()}function D(k){_.value=k}return(k,$)=>{var C;return p(),m("section",is,[i("header",as,[i("div",null,[i("h2",ls,v(e.drill.title),1),i("p",rs,v(e.drill.category),1)]),i("button",{type:"button",class:"btn","aria-pressed":r.value,"aria-label":r.value?"Aus Favoriten entfernen":"Zu Favoriten hinzuf√ºgen",onClick:l,title:"Favorit"},[i("span",ds,v(r.value?"‚òÖ":"‚òÜ"),1)],8,os)]),F(ve,{drill:e.drill},null,8,["drill"]),$[3]||($[3]=i("hr",{class:"hr"},null,-1)),i("div",cs,[$[2]||($[2]=i("strong",null,"Timer & Messwert",-1)),i("div",us,[i("div",ps,[$[1]||($[1]=i("h3",{class:"label",style:{margin:"0"}},"Session",-1)),d.value?(p(),m("output",ms,"Aktiv")):S("",!0)]),F(xe,{drill:e.drill,modelValue:h.value,"onUpdate:modelValue":$[0]||($[0]=L=>h.value=L),disabled:!d.value,label:e.drill.metric.unit},null,8,["drill","modelValue","disabled","label"]),d.value&&e.drill.metric.type==="count_in_time"?(p(),m("div",fs,[i("button",{class:"btn",type:"button",onClick:f,"aria-label":`+1 Versuch zu ${e.drill.title}`,"data-testid":"attempts-inc"},"+1",8,hs),i("output",gs," Versuche: "+v(b.value),1)])):S("",!0),i("div",ys,[d.value?(p(),m(M,{key:1},[i("button",{class:"btn",type:"button",onClick:o},"Abbrechen"),i("button",{class:"btn btn-primary",type:"button",onClick:x,disabled:!g.value},"Speichern",8,vs)],64)):(p(),m("button",{key:0,class:"btn btn-primary",type:"button",onClick:c},"Session starten"))]),d.value&&((C=e.drill.duration)!=null&&C.timerPreset)?(p(),m("div",bs,[F(me,{ref_key:"timerRef",ref:y,"preset-seconds":e.drill.duration.timerPreset,onElapsed:D},null,8,["preset-seconds"])])):S("",!0)]),F(ns,{"drill-id":e.drill.id},null,8,["drill-id"]),F(pe,{drill:e.drill},null,8,["drill"]),F(he,{"drill-id":e.drill.id,unit:e.drill.metric.unit},null,8,["drill-id","unit"])]),e.drill?(p(),re(zt,{key:0,drillId:e.drill.id,tip:u.value},null,8,["drillId","tip"])):S("",!0),F(fe,{"drill-id":e.drill.id},null,8,["drill-id"])])}}});_e.__docgenInfo={exportName:"default",displayName:"DrillDetail",description:"",tags:{},props:[{name:"drill",required:!0,type:{name:"Drill"}}],sourceFiles:["/Users/brigittebohm/Workspace/golf/parformance/src/components/DrillDetail.vue"]};const $e={id:"range_14_fairways",title:"14 Fairways",category:"Driving Range",equipment:{balls:28,clubs:["Driver","Eisen 7"]},setup:{schema:"Zielkorridor >30 m Breite, 14 Driver + 14 Eisen",location:"Range"},duration:{suggestedMin:20,timerPreset:1200},instructions:{training:"Je 14 B√§lle mit Driver/Eisen in den Korridor. Z√§hle nur Treffer.",tooEasy:"Flugkurven variieren, Korridor schmaler."},metric:{type:"corridor_hits",unit:"Treffer",hcpTargets:{}},tags:["Abschlag","Richtungskontrolle"]},Ds={title:"Components/DrillDetail",component:_e,args:{drill:$e}},P={},z={args:{drill:{...$e,title:"Carry Zone",id:"chip_carry_zone",category:"Chipping Green",duration:{suggestedMin:5,timerPreset:300},instructions:{training:"Abwechselnd kurz‚Üílang die Carry-Zonen treffen. L√§ngste fehlerfreie Serie z√§hlt.",test:"H√∂chstserie in 5 Min.",tooEasy:"Nach jedem Schlag Schl√§ger wechseln oder B√§nder enger."},metric:{type:"streak",unit:"Zonen in Serie",hcpTargets:{}},difficulty:{base:3,scale:"1-5"}}}};var Y,Q,X;P.parameters={...P.parameters,docs:{...(Y=P.parameters)==null?void 0:Y.docs,source:{originalSource:"{}",...(X=(Q=P.parameters)==null?void 0:Q.docs)==null?void 0:X.source}}};var ee,te,se;z.parameters={...z.parameters,docs:{...(ee=z.parameters)==null?void 0:ee.docs,source:{originalSource:`{
  args: {
    drill: {
      ...sample,
      title: 'Carry Zone',
      id: 'chip_carry_zone',
      category: 'Chipping Green',
      duration: {
        suggestedMin: 5,
        timerPreset: 300
      },
      instructions: {
        training: 'Abwechselnd kurz‚Üílang die Carry-Zonen treffen. L√§ngste fehlerfreie Serie z√§hlt.',
        test: 'H√∂chstserie in 5 Min.',
        tooEasy: 'Nach jedem Schlag Schl√§ger wechseln oder B√§nder enger.'
      },
      metric: {
        type: 'streak',
        unit: 'Zonen in Serie',
        hcpTargets: {}
      },
      // @ts-ignore add difficulty for preview UI only
      difficulty: {
        base: 3,
        scale: '1-5'
      }
    } as Drill
  }
}`,...(se=(te=z.parameters)==null?void 0:te.docs)==null?void 0:se.source}}};const Is=["Default","WithTestAndDifficulty"];export{P as Default,z as WithTestAndDifficulty,Is as __namedExportsOrder,Ds as default};
