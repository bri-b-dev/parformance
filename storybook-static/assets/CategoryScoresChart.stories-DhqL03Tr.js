import{k as D,r as G,u as V,f as c,q as r,s as n,v as C,x as d,F as f,y as v,p as o,z as L,A as U}from"./vue.esm-bundler-BAM-3gvP.js";const H=["aria-label"],J={style:{display:"flex","align-items":"center","justify-content":"space-between",gap:"8px","margin-bottom":"6px"}},Q={key:0,style:{margin:"0","font-weight":"700"}},T={class:"chip","aria-label":"Anzahl Kategorien"},X={class:"sr-only","aria-live":"polite"},Y={key:0,class:"row",style:{"flex-direction":"column",gap:"8px"}},Z={style:{display:"flex","align-items":"center","justify-content":"space-between","font-size":"12px","margin-bottom":"4px"}},ee={class:"w-full",style:{height:"10px",background:"var(--border)","border-radius":"999px",overflow:"hidden"}},te=["data-testid"],ae={key:1,class:"w-full",style:{display:"flex","align-items":"center","justify-content":"center"}},ne=["viewBox"],re=["transform"],oe=["r"],se=["transform"],le=["x2","y2"],ie=["transform"],ce=["points","fill","stroke"],ue=["cx","cy"],de={"font-size":"11",fill:"currentColor"},me=["x","y"],m=320,B=D({__name:"CategoryScoresChart",props:{scores:{},title:{},mode:{}},setup(y){const u=y,b=G("bar");V(()=>{if(u.mode==="auto"||u.mode==null)try{const t=typeof window<"u"?window.innerWidth:0;b.value=t>=800?"radar":"bar"}catch{b.value="bar"}});const R=c(()=>u.mode&&u.mode!=="auto"?u.mode:b.value),l=c(()=>Object.keys(u.scores||{})),p=c(()=>l.value.map(t=>N(u.scores[t]))),I=c(()=>l.value.map((a,e)=>({category:a,value:p.value[e]})));function N(t){const a=Math.round(Number(t)||0);return Math.max(0,Math.min(100,a))}const h=c(()=>{let t=-1,a=1/0;return p.value.forEach((e,i)=>{e<a&&(a=e,t=i)}),t});function q(t){const e=l.value.indexOf(t.category)===h.value?"#ef4444":"#2F7A52";return{width:`${t.value}%`,background:e,borderRadius:"999px"}}const s=m/2,g=Math.min(m,m)*.35;function k(t){const a=Math.max(1,l.value.length);return-Math.PI/2+t*2*Math.PI/a}function $(t){const a=k(t);return{x:s+Math.cos(a)*g,y:s+Math.sin(a)*g}}function w(t){const a=k(t),e=p.value[t]/100*g;return{x:Math.cos(a)*e,y:Math.sin(a)*e}}function M(t){const a=k(t),e=g+18;return{x:s+Math.cos(a)*e,y:s+Math.sin(a)*e}}const A=c(()=>l.value.map((t,a)=>{const e=w(a);return`${s+e.x},${s+e.y}`}).join(" ")),W=c(()=>"rgba(47,122,82,0.15)"),E=c(()=>"#2F7A52"),O=c(()=>{if(l.value.length===0)return"Keine Kategorien vorhanden.";const t=l.value.map((e,i)=>`${e}: ${p.value[i]} Prozent`),a=h.value>=0?l.value[h.value]:null;return`Fähigkeiten je Kategorie. ${t.join(", ")}. Schwächste Kategorie: ${a??"—"}.`});return(t,a)=>(o(),r("section",{class:"card","aria-label":y.title||"Kategorien"},[n("header",J,[y.title?(o(),r("h3",Q,d(y.title),1)):C("",!0),n("small",T,d(l.value.length)+" Kategorien",1)]),n("output",X,d(O.value),1),R.value==="bar"?(o(),r("div",Y,[(o(!0),r(f,null,v(I.value,e=>(o(),r("div",{key:e.category,class:"w-full"},[n("div",Z,[n("span",null,d(e.category),1),n("span",null,d(e.value)+"%",1)]),n("div",ee,[n("div",{"data-testid":`bar-${e.category}`,class:U(["h-full"]),style:L(q(e))},null,12,te)])]))),128))])):(o(),r("div",ae,[(o(),r("svg",{width:m,height:m,viewBox:`0 0 ${m} ${m}`,role:"img","aria-label":"Radar Chart"},[n("g",{transform:`translate(${s}, ${s})`,stroke:"var(--border)",fill:"none"},[(o(),r(f,null,v([.25,.5,.75,1],e=>n("circle",{key:e,r:e*g},null,8,oe)),64))],8,re),n("g",{transform:`translate(${s}, ${s})`,stroke:"var(--border)"},[(o(!0),r(f,null,v(l.value,(e,i)=>(o(),r("line",{key:e,x1:0,y1:0,x2:$(i).x,y2:$(i).y},null,8,le))),128))],8,se),n("g",{transform:`translate(${s}, ${s})`},[n("polygon",{points:A.value,fill:W.value,stroke:E.value,"stroke-width":"2"},null,8,ce),h.value>=0?(o(),r("circle",{key:0,cx:w(h.value).x,cy:w(h.value).y,r:"4",fill:"#ef4444"},null,8,ue)):C("",!0)],8,ie),n("g",de,[(o(!0),r(f,null,v(l.value,(e,i)=>(o(),r("text",{key:`lbl-${e}`,x:M(i).x,y:M(i).y,"text-anchor":"middle","dominant-baseline":"central"},d(e)+" ("+d(p.value[i])+"%) ",9,me))),128))])],8,ne))]))],8,H))}});B.__docgenInfo={exportName:"default",displayName:"CategoryScoresChart",description:"",tags:{},props:[{name:"scores",required:!0,type:{name:"Record",elements:[{name:"string"},{name:"number"}]}},{name:"title",required:!1,type:{name:"string"}},{name:"mode",description:"'auto' picks based on viewport; tests/stories can force 'bar' or 'radar'",required:!1,type:{name:"union",elements:[{name:'"auto"'},{name:'"bar"'},{name:'"radar"'}]}}],sourceFiles:["/Users/brigittebohm/Workspace/golf/parformance/src/components/CategoryScoresChart.vue"]};const he={"Putting Green":100,"Chipping Green":33,"Driving Range":67},ge={title:"Components/CategoryScoresChart",component:B,args:{scores:he,title:"Fähigkeiten je Kategorie (0–100)"}},_={args:{mode:"bar"}},x={args:{mode:"radar"}};var S,F,P;_.parameters={..._.parameters,docs:{...(S=_.parameters)==null?void 0:S.docs,source:{originalSource:`{
  args: {
    mode: 'bar'
  }
}`,...(P=(F=_.parameters)==null?void 0:F.docs)==null?void 0:P.source}}};var j,z,K;x.parameters={...x.parameters,docs:{...(j=x.parameters)==null?void 0:j.docs,source:{originalSource:`{
  args: {
    mode: 'radar'
  }
}`,...(K=(z=x.parameters)==null?void 0:z.docs)==null?void 0:K.source}}};const ye=["Bars","Radar"];export{_ as Bars,x as Radar,ye as __namedExportsOrder,ge as default};
