import{k as E,r as G,u as T,f as c,q as n,s as r,v as S,x as u,F as v,y as f,p as o,z as V,A as L}from"./vue.esm-bundler-BAM-3gvP.js";const U=["aria-label"],H={style:{display:"flex","align-items":"center","justify-content":"space-between",gap:"8px","margin-bottom":"6px"}},J={key:0,style:{margin:"0","font-weight":"700"}},Q={class:"chip","aria-label":"Anzahl Kategorien"},X={class:"sr-only","aria-live":"polite"},Y={key:0,class:"row",style:{"flex-direction":"column",gap:"8px"}},Z={style:{display:"flex","align-items":"center","justify-content":"space-between","font-size":"12px","margin-bottom":"4px"}},ee={class:"w-full",style:{height:"10px",background:"var(--border)","border-radius":"999px",overflow:"hidden"}},te=["data-testid"],ae={key:1,class:"w-full",style:{display:"flex","align-items":"center","justify-content":"center"}},re=["viewBox"],ne={id:"radar-desc"},oe=["transform"],se=["r"],le=["transform"],ie=["x2","y2"],ce=["transform"],ue=["points","fill","stroke"],de=["cx","cy"],me={"font-size":"11",fill:"currentColor"},he=["x","y"],m=320,R=E({__name:"CategoryScoresChart",props:{scores:{},title:{},mode:{}},setup(y){const d=y,b=G("bar");T(()=>{if(d.mode==="auto"||d.mode==null)try{const t=globalThis.window===void 0?0:globalThis.window.innerWidth;b.value=t>=800?"radar":"bar"}catch{b.value="bar"}});const I=c(()=>d.mode&&d.mode!=="auto"?d.mode:b.value),l=c(()=>Object.keys(d.scores||{})),h=c(()=>l.value.map(t=>q(d.scores[t]))),N=c(()=>l.value.map((a,e)=>({category:a,value:h.value[e]})));function q(t){const a=Math.round(Number(t)||0);return Math.max(0,Math.min(100,a))}const g=c(()=>{let t=-1,a=1/0;for(let e=0;e<h.value.length;e++){const i=h.value[e];i<a&&(a=i,t=e)}return t});function A(t){const e=l.value.indexOf(t.category)===g.value?"#ef4444":"#2F7A52";return{width:`${t.value}%`,background:e,borderRadius:"999px"}}const s=m/2,p=Math.min(m,m)*.35;function k(t){const a=Math.max(1,l.value.length);return-Math.PI/2+t*2*Math.PI/a}function $(t){const a=k(t);return{x:s+Math.cos(a)*p,y:s+Math.sin(a)*p}}function w(t){const a=k(t),e=h.value[t]/100*p;return{x:Math.cos(a)*e,y:Math.sin(a)*e}}function M(t){const a=k(t),e=p+18;return{x:s+Math.cos(a)*e,y:s+Math.sin(a)*e}}const W=c(()=>l.value.map((t,a)=>{const e=w(a);return`${s+e.x},${s+e.y}`}).join(" ")),O=c(()=>"rgba(47,122,82,0.15)"),D=c(()=>"#2F7A52"),C=c(()=>{if(l.value.length===0)return"Keine Kategorien vorhanden.";const t=l.value.map((e,i)=>`${e}: ${h.value[i]} Prozent`),a=g.value>=0?l.value[g.value]:null;return`Fähigkeiten je Kategorie. ${t.join(", ")}. Schwächste Kategorie: ${a??"—"}.`});return(t,a)=>(o(),n("section",{class:"card","aria-label":y.title||"Kategorien"},[r("header",H,[y.title?(o(),n("h3",J,u(y.title),1)):S("",!0),r("small",Q,u(l.value.length)+" Kategorien",1)]),r("output",X,u(C.value),1),I.value==="bar"?(o(),n("div",Y,[(o(!0),n(v,null,f(N.value,e=>(o(),n("div",{key:e.category,class:"w-full"},[r("div",Z,[r("span",null,u(e.category),1),r("span",null,u(e.value)+"%",1)]),r("div",ee,[r("div",{"data-testid":`bar-${e.category}`,class:L(["h-full"]),style:V(A(e))},null,12,te)])]))),128))])):(o(),n("div",ae,[(o(),n("svg",{width:m,height:m,viewBox:`0 0 ${m} ${m}`,"aria-labelledby":"radar-title","aria-describedby":"radar-desc"},[a[0]||(a[0]=r("title",{id:"radar-title"},"Radar Chart",-1)),r("desc",ne,u(C.value),1),r("g",{transform:`translate(${s}, ${s})`,stroke:"var(--border)",fill:"none"},[(o(),n(v,null,f([.25,.5,.75,1],e=>r("circle",{key:e,r:e*p},null,8,se)),64))],8,oe),r("g",{transform:`translate(${s}, ${s})`,stroke:"var(--border)"},[(o(!0),n(v,null,f(l.value,(e,i)=>(o(),n("line",{key:e,x1:0,y1:0,x2:$(i).x,y2:$(i).y},null,8,ie))),128))],8,le),r("g",{transform:`translate(${s}, ${s})`},[r("polygon",{points:W.value,fill:O.value,stroke:D.value,"stroke-width":"2"},null,8,ue),g.value>=0?(o(),n("circle",{key:0,cx:w(g.value).x,cy:w(g.value).y,r:"4",fill:"#ef4444"},null,8,de)):S("",!0)],8,ce),r("g",me,[(o(!0),n(v,null,f(l.value,(e,i)=>(o(),n("text",{key:`lbl-${e}`,x:M(i).x,y:M(i).y,"text-anchor":"middle","dominant-baseline":"central"},u(e)+" ("+u(h.value[i])+"%) ",9,he))),128))])],8,re))]))],8,U))}});R.__docgenInfo={exportName:"default",displayName:"CategoryScoresChart",description:"",tags:{},props:[{name:"scores",required:!0,type:{name:"Record",elements:[{name:"string"},{name:"number"}]}},{name:"title",required:!1,type:{name:"string"}},{name:"mode",description:"'auto' picks based on viewport; tests/stories can force 'bar' or 'radar'",required:!1,type:{name:"union",elements:[{name:'"auto"'},{name:'"bar"'},{name:'"radar"'}]}}],sourceFiles:["/Users/brigittebohm/Workspace/golf/parformance/src/components/CategoryScoresChart.vue"]};const ge={"Putting Green":100,"Chipping Green":33,"Driving Range":67},ye={title:"Components/CategoryScoresChart",component:R,args:{scores:ge,title:"Fähigkeiten je Kategorie (0–100)"}},_={args:{mode:"bar"}},x={args:{mode:"radar"}};var F,P,j;_.parameters={..._.parameters,docs:{...(F=_.parameters)==null?void 0:F.docs,source:{originalSource:`{
  args: {
    mode: 'bar'
  }
}`,...(j=(P=_.parameters)==null?void 0:P.docs)==null?void 0:j.source}}};var z,K,B;x.parameters={...x.parameters,docs:{...(z=x.parameters)==null?void 0:z.docs,source:{originalSource:`{
  args: {
    mode: 'radar'
  }
}`,...(B=(K=x.parameters)==null?void 0:K.docs)==null?void 0:B.source}}};const ve=["Bars","Radar"];export{_ as Bars,x as Radar,ve as __namedExportsOrder,ye as default};
